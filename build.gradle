group 'test'
version '1.0-SNAPSHOT'

buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "org.sonarsource.scanner.gradle:sonarqube-gradle-plugin:2.6.2"
    }
}

apply plugin: 'java'
apply plugin: 'checkstyle'
apply plugin: 'pmd'
apply plugin: 'findbugs'
apply plugin: 'org.sonarqube'

checkstyle {
    configFile = new File(rootDir, 'config/checkstyle/checktyle.xml')
    ignoreFailures = true
    sourceSets = [sourceSets.main]
    toolVersion = "8.8"
}

checkstyleMain {
    reports {
        xml.destination = new File(rootDir, 'checkstyle-report.xml')
    }
}

pmd {
    ignoreFailures = true
    sourceSets = [sourceSets.main]
    ruleSets = ['java-basic', 'java-strings', 'java-braces']
}

pmdMain {
    reports {
        xml.destination = new File(rootDir, 'pmd-report.xml')
        xml.enabled = true
    }
}

tasks.withType(Pmd) {
    reports {
        xml.enabled false
        html.enabled true
    }
}

findbugs {
    ignoreFailures = true
    toolVersion = "3.0.1"
    sourceSets = [sourceSets.main]
    effort = "max"
}

tasks.withType(FindBugs) {
    reports {
        xml.enabled = false
        html.enabled = true
    }
}

sonarqube {
    properties {
        property "sonar.projectKey", "ctip-yeah"
        property "sonar.projectName", "ctip-yeah"
        property "sonar.sources", "unit_test/src/"
        property "sonar.sourceEncoding", "UTF-8"
    }
}

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'
}